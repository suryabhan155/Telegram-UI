/*!
 * Clamp.js 0.5.1
 *
 * Copyright 2011-2013, Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 */
window.$clamp=function(e,t){function n(e,t){return u.getComputedStyle||(u.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,(function(e,t,n){return n.toUpperCase()}))),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),u.getComputedStyle(e,null).getPropertyValue(t)}function i(t){t=t||e.clientHeight;var n=l(e);return Math.max(Math.floor(t/n),0)}function l(e){var t=n(e,"line-height");return"normal"==t&&(t=1.2*parseInt(n(e,"font-size"))),parseInt(t)}function a(t){return t.lastChild.children&&0<t.lastChild.children.length?a(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!=t.lastChild.nodeValue&&t.lastChild.nodeValue!=c.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),a(e))}function r(e,t){e.nodeValue=t+c.truncationChar}t=t||{};var o,u=window,c={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},s=e.style,h=e.innerHTML,p=void 0!==e.style.webkitLineClamp,d=c.clamp,C=d.indexOf&&(-1<d.indexOf("px")||-1<d.indexOf("em"));c.truncationHTML&&((o=document.createElement("span")).innerHTML=c.truncationHTML);var m,f,g,v,y=c.splitOnChars.slice(0),H=y[0];return"auto"==d?d=i():C&&(d=i(parseInt(d))),p&&c.useNativeClamp?(s.overflow="hidden",s.textOverflow="ellipsis",s.webkitBoxOrient="vertical",s.display="-webkit-box",s.webkitLineClamp=d,C&&(s.height=c.clamp+"px")):(v=d,(s=l(e)*v)<=e.clientHeight&&(g=function t(n,i){if(i){var l=n.nodeValue.replace(c.truncationChar,"");if(m||(H=0<y.length?y.shift():"",m=l.split(H)),1<m.length?(f=m.pop(),r(n,m.join(H))):m=null,o&&(n.nodeValue=n.nodeValue.replace(c.truncationChar,""),e.innerHTML=n.nodeValue+" "+o.innerHTML+c.truncationChar),m){if(e.clientHeight<=i){if(!(0<=y.length&&""!=H))return e.innerHTML;r(n,m.join(H)+H+f),m=null}}else""==H&&(r(n,""),n=a(e),y=c.splitOnChars.slice(0),H=y[0],f=m=null);if(!c.animate)return t(n,i);setTimeout((function(){t(n,i)}),!0===c.animate?10:c.animate)}}(a(e),s))),{original:h,clamped:g}};