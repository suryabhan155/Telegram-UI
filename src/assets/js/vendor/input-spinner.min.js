"use strict";!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n(require("jquery")):n(jQuery)}((function(n){var i,t=function(i,s){return this.$el=i,this.options=Object.assign({},t.rules.defaults,t.rules[s.rule]||{},s),this.min=Number(this.options.min)||0,this.max=Number(this.options.max)||0,this.spinningTimer=null,this.$el.on({"focus.spinner":function(i){i.preventDefault(),n(this.$el).trigger("mouseup.spinner"),this.oldValue=this.value()}.bind(this),"change.spinner":function(n){n.preventDefault(),this.value(this.$el.val())}.bind(this),"keydown.spinner":function(n){var i={38:"up",40:"down"}[n.keyCode];i&&(n.preventDefault(),this.spin(i))}.bind(this)}),this.oldValue=this.value(),this.value(this.$el.val()),this};t.rules={defaults:{min:null,max:null,step:1,precision:0},currency:{min:0,max:null,step:.01,precision:2},quantity:{min:1,max:999,step:1,precision:0},percent:{min:1,max:100,step:1,precision:0},month:{min:1,max:12,step:1,precision:0},day:{min:1,max:31,step:1,precision:0},hour:{min:0,max:23,step:1,precision:0},minute:{min:1,max:59,step:1,precision:0},second:{min:1,max:59,step:1,precision:0}},t.prototype={spin:function(n){if(!this.$el.prop("disabled")){this.oldValue=this.value();var i="function"==typeof this.options.step?this.options.step.call(this,n):this.options.step,t="up"===n?1:-1;this.value(this.oldValue+Number(i)*t)}},value:function(n){if(null==n)return this.numeric(this.$el.val());n=this.numeric(n);var t=this.validate(n);0!==t&&(n=-1===t?this.min:this.max),this.$el.val(n.toFixed(this.options.precision)),this.oldValue!==this.value()&&(this.$el.trigger("changing.spinner",[this.value(),this.oldValue]),clearTimeout(this.spinningTimer),this.spinningTimer=setTimeout(function(){this.$el.trigger("changed.spinner",[this.value(),this.oldValue])}.bind(this),i.delay))},numeric:function(n){return n=this.options.precision>0?parseFloat(n,10):parseInt(n,10),isFinite(n)?n:n||this.options.min||0},validate:function(n){return null!==this.options.min&&n<this.min?-1:null!==this.options.max&&n>this.max?1:0}},(i=function(i,s){this.$el=n(i),this.$spinning=this.$el.find('[data-spin="spinner"]'),0===this.$spinning.length&&(this.$spinning=this.$el.find('input[type="text"]')),s=Object.assign({},s,this.$spinning.data()),this.spinning=new t(this.$spinning,s),this.$el.on("click.spinner",'[data-spin="up"], [data-spin="down"]',this.spin.bind(this)).on("mousedown.spinner",'[data-spin="up"], [data-spin="down"]',this.spin.bind(this)).on("mouseup.spinner",'[data-spin="up"], [data-spin="down"]',this.spin.bind(this)),s.delay&&this.delay(s.delay),s.changed&&this.changed(s.changed),s.changing&&this.changing(s.changing)}).delay=500,i.prototype={constructor:i,spin:function(i){var t=n(i.currentTarget).data("spin");switch(i.type){case"click":i.preventDefault(),this.spinning.spin(t);break;case"mousedown":1===i.keyCode&&(this.spinTimeout=setTimeout(this.beginSpin.bind(this,t),300));break;case"mouseup":clearTimeout(this.spinTimeout),clearInterval(this.spinInterval)}},delay:function(n){var i=Number(n);i>=0&&(this.constructor.delay=i+100)},value:function(){return this.spinning.value()},changed:function(n){this.bindHandler("changed.spinner",n)},changing:function(n){this.bindHandler("changing.spinner",n)},bindHandler:function(n,i){"function"==typeof i?this.$spinning.on(n,i):this.$spinning.off(n)},beginSpin:function(n){this.spinInterval=setInterval(this.spinning.spin.bind(this.spinning,n),100)}};var s=n.fn.spinner;return n.fn.spinner=function(t,s){return this.each((function(){var e=n.data(this,"spinner");e||(e=new i(this,t),n.data(this,"spinner",e)),"delay"===t||"changed"===t||"changing"===t?e[t](s):"step"===t&&s?e.spinning.step=s:"spin"===t&&s&&e.spinning.spin(s)}))},n.fn.spinner.Constructor=i,n.fn.spinner.noConflict=function(){return n.fn.spinner=s,this},n((function(){n('[data-trigger="spinner"]').spinner()})),n.fn.spinner}));