class Checkall{get options(){return{itemSelector:".card",clickSelector:".card",selectedClass:"selected"}}constructor(e,t={}){this.settings=Object.assign(this.options,t),this._button=e,this._contentSelector=this._button.getAttribute("data-target"),this._contentContainer=document.querySelector(this._contentSelector),this._button&&this._contentContainer?(this._onCheckAllClick=this._onCheckAllClick.bind(this),this._onCheckChange=this._onCheckChange.bind(this),this._onSingleCheckClick=this._onSingleCheckClick.bind(this),this._init()):console.error("Checkall initialization error")}_init(){this._addListeners()}_addListeners(){this._button.addEventListener("click",this._onCheckAllClick),this._button.querySelector("input")&&this._button.querySelector("input").addEventListener("change",this._onCheckChange),this._contentContainer.addEventListener("click",this._onSingleCheckClick)}_onCheckAllClick(e){e.currentTarget.querySelector("input").click()}_onCheckChange(e){e.currentTarget.checked?this._checkAllRows():this._unCheckAllRows(),this._controlCheckAll()}_checkAllRows(){this._contentContainer.querySelectorAll(this.settings.itemSelector).forEach((e=>{e.classList.add(this.settings.selectedClass)})),this._contentContainer.querySelectorAll(this.settings.itemSelector+" .form-check input").forEach((e=>{e.checked=!0}))}_unCheckAllRows(){this._contentContainer.querySelectorAll(this.settings.itemSelector).forEach((e=>{e.classList.remove(this.settings.selectedClass)})),this._contentContainer.querySelectorAll(this.settings.itemSelector+" .form-check input").forEach((e=>{e.checked=!1}))}_controlCheckAll(){let e=!1,t=!0;this._contentContainer.querySelectorAll(".form-check input").forEach((i=>{i.checked?e=!0:t=!1}));const i=this._button.querySelector("input");e?i.indeterminate=e:(i.indeterminate=e,i.checked=e),t&&(i.indeterminate=!1,i.checked=t)}_onSingleCheckClick(e){if("A"===e.target.tagName||"IMG"===e.target.tagName)return!0;if(e.preventDefault(),e.target.closest(this.settings.clickSelector)){const t=e.target.closest(this.settings.itemSelector);t.classList.toggle(this.settings.selectedClass);const i=t.querySelector(".form-check input");i.checked=!i.checked,i.dispatchEvent(new Event("change")),this._controlCheckAll()}}_removeListeners(){this._button.removeEventListener("click",this._onCheckAllClick),this._button.querySelector("input").removeEventListener("change",this._onCheckChange),this._contentContainer.removeEventListener("click",this._onSingleCheckClick)}reset(){this._unCheckAllRows(),this._controlCheckAll()}update(){this._removeListeners(),this._addListeners()}destroy(){this._removeListeners()}}